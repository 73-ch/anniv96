!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/packs/",i(i.s=0)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=function(){function e(t,i,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.texture=i,this.window_size=[window.innerWidth,window.innerHeight],this.wind_data=n,this.counter=Math.floor(Math.random()*this.wind_data.length),this.threshold=t?.02:.0082,this.mobile_power=t?.002:.001,this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.window_size[0],this.window_size[1]),this.move_rad=0,this.date_data=document.querySelector(".date-data"),this.logoLayer(),this.layerBlend(),document.querySelector(".top-content").appendChild(this.renderer.domElement),this.update(),o(),window.scene=this.final.scene,window.scene=this.logo.scene,this.resizeCanvas()}return n(e,[{key:"update",value:function(){var e=this,t=this.wind_data[this.counter],i=.5*Math.exp(2-Math.abs(Math.cos(t.direction)-Math.cos(this.move_rad)));this.final.material.uniforms.wind.value=new THREE.Vector2(t.direction,t.velocity*this.mobile_power*i),this.counter++,this.counter>=this.wind_data.length&&(this.counter=0),this.date_data.textContent=t.date,this.draw(function(){requestAnimationFrame(e.update.bind(e))})}},{key:"draw",value:function(e){this.renderer.render(this.logo.scene,this.logo.camera,this.logo.rt),this.final.material.uniforms.texture.value=this.logo.rt.texture,this.renderer.render(this.final.scene,this.final.camera),e()}},{key:"logoLayer",value:function(){this.logo={},this.logo.rt=new THREE.WebGLRenderTarget(this.window_size[0],this.window_size[1],{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBFormat}),this.logo.scene=new THREE.Scene,this.logo.camera=new THREE.PerspectiveCamera(45,this.window_size[0]/this.window_size[1],1,1e4),this.logo.camera.position.set(0,0,1e3),this.createLogo(),this.logo.light=new THREE.DirectionalLight(16777215),this.logo.light.position.set(1,1,1),this.logo.scene.add(this.logo.light)}},{key:"createLogo",value:function(){this.logo.geometry=new THREE.PlaneGeometry(30,30);var e=new THREE.MeshBasicMaterial({map:this.texture});this.logo.obj=new THREE.Mesh(this.logo.geometry,e),console.log(this.logo.obj),this.logo.scene.add(this.logo.obj)}},{key:"layerBlend",value:function(){this.final={},this.final.scene=new THREE.Scene,this.final.camera=new THREE.PerspectiveCamera(45,this.window_size[0]/this.window_size[1],1,1e4),this.final.camera.position.set(0,0,1e3),this.final.material=new THREE.ShaderMaterial({fragmentShader:document.getElementById("fs").innerHTML,vertexShader:document.getElementById("vs").innerHTML,uniforms:{texture:{type:"t",value:this.logo.rt.texture},wind:{type:"v2",value:new THREE.Vector2(this.wind_data[0].direction,this.wind_data[0].velocity*this.power)}}}),this.final.geometry=new THREE.PlaneGeometry(this.window_size[0],this.window_size[1],1,1),this.final.plane=new THREE.Mesh(this.final.geometry,this.final.material),this.final.scene.add(this.final.plane)}},{key:"resizeCanvas",value:function(){this.window_size=[window.innerWidth,window.innerHeight-60],this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.window_size[0],this.window_size[1]),this.logo.rt.setSize(this.window_size[0],this.window_size[1]),this.logo.camera.aspect=this.window_size[0]/this.window_size[1],this.logo.camera.updateProjectionMatrix(),console.log(this.logo.obj);var e=(this.window_size[0]<this.window_size[1]?this.window_size[0]:this.window_size[1])*this.threshold;this.logo.obj.scale.set(e,e,e)}},{key:"actionDevise",value:function(e){}},{key:"mouseMove",value:function(e){this.move_rad=Math.atan2(e.clientX/this.window_size[0]*2-1,e.clientY/this.window_size[1]*-2+1),this.move_rad+=this.move_rad<0?2*Math.PI:0}},{key:"deviseOrientation",value:function(e){this.move_rad=e.alpha/360*Math.PI}}]),e}();t.default=o}]);
//# sourceMappingURL=pre_animation-24df7dec034c7132c174.js.map